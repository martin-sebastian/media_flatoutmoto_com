<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hang Tags</title>
    <link rel="icon" type="image/x-icon" href="../img/favicon.png" />
    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css"
      integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../css/font-awesome.css" />
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body class="dots hang-tags-body">
    <header class="hidden-print">
      <div class="print-header navbar-fixed-top text-center">
        <div class="hidden-xs">
          <div class="hide-elements">
            <strong>HIDE ELEMENTS: </strong>
            <label>
              <input type="checkbox" id="msrpCheckBox" onclick="hideMSRP()" checked />
              MSRP
            </label>
            <label>
              <input type="checkbox" id="savingsCheckBox" onclick="hideSavings()" checked />
              Savings
            </label>
            <label>
              <input type="checkbox" id="rebatesCheckBox" onclick="hideRebates()" checked />
              Rebates
            </label>
            <label>
              <input type="checkbox" id="discountsCheckBox" onclick="hideDiscounts()" checked />
              Discounts
            </label>
            <label>
              <input type="checkbox" id="feesCheckBox" onclick="hideFees()" checked />
              Fees & Taxes
            </label>
            <label>
              <input type="checkbox" id="photoCheckBox" onclick="hidePhoto()" checked />
              Photo
            </label>
            <label>
              <input type="checkbox" id="descriptionCheckBox" onclick="hideDescription()" checked />
              Description
            </label>
            <label>
              <input type="checkbox" id="qrCodeCheckBox" onclick="hideQrCode()" checked />
              QR Code
            </label>
            <label>
              <input type="checkbox" id="barCodeCheckBox" onclick="hideBarCode()" checked />
              Bar Code
            </label>
            <label>
              <input type="checkbox" id="footerCheckBox" onclick="hideFooter()" checked />
              Footer
            </label>
            <span class="hang-tags-zoom-controls">
              <button type="button" class="btn btn-default btn-xs" id="zoomOutBtn" title="Zoom out">
                <span class="glyphicon glyphicon-zoom-out" aria-hidden="true"></span>
              </button>
              <button type="button" class="btn btn-default btn-xs" id="zoomResetBtn" title="Fit to screen">
                Fit
              </button>
              <button type="button" class="btn btn-default btn-xs" id="zoomInBtn" title="Zoom in">
                <span class="glyphicon glyphicon-zoom-in" aria-hidden="true"></span>
              </button>
            </span>
          </div>
        </div>
      </div>
    </header>
    <main>
      <div class="container-fluid">
        <div class="tags-spacer dots hidden-print"></div>
        <div class="main-content">
          <div class="hang-tags-preview" id="hangTagsPreview">
            <div class="tags-container shadow" id="hangTagsContainer">
              <div class="tag-left"></div>
              <div class="tag-right"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="tags-spacer dots hidden-print"></div>
    </main>
    <script src="../js/jsBarcode.all.min.js"></script>
    <script src="../js/qrcode.min.js"></script>
    <script src="../js/numeral.js"></script>
    <script src="../js/moment.js"></script>
    <script src="../js/xml-cache.js"></script>
    <script src="../js/hang-tags-0_1_1.js"></script>
    <script>
      /**
       * Apply zoom to the hang tags preview.
       * @param {number} scale Zoom scale value.
       */
      function applyHangTagsZoom(scale) {
        var container = document.getElementById("hangTagsContainer");
        if (!container) return;
        if (window.CSS && window.CSS.supports && window.CSS.supports("zoom: 1")) {
          container.style.zoom = scale;
          container.style.transform = "";
        } else {
          container.style.zoom = "";
          container.style.transform = "scale(" + scale + ")";
          container.style.transformOrigin = "top center";
        }
        container.setAttribute("data-zoom", scale.toFixed(2));
      }

      /**
       * Calculate a fit-to-screen zoom value.
       * @returns {number} Zoom scale.
       */
      function getHangTagsFitZoom() {
        var container = document.getElementById("hangTagsContainer");
        if (!container) return 1;
        if (!container.dataset.baseWidth || !container.dataset.baseHeight) {
          var rect = container.getBoundingClientRect();
          container.dataset.baseWidth = rect.width;
          container.dataset.baseHeight = rect.height;
        }
        var header = document.querySelector("header");
        var headerHeight = header ? header.offsetHeight : 0;
        var padding = 32;
        var availableWidth = window.innerWidth - padding * 2;
        var availableHeight = window.innerHeight - headerHeight - padding * 2;
        var baseWidth = parseFloat(container.dataset.baseWidth) || availableWidth;
        var baseHeight = parseFloat(container.dataset.baseHeight) || availableHeight;
        var scale = Math.min(availableWidth / baseWidth, availableHeight / baseHeight);
        return Math.max(0.1, Math.min(1.2, scale));
      }

      /**
       * Initialize zoom controls for hang tags.
       */
      function initHangTagsZoom() {
        var zoomOutBtn = document.getElementById("zoomOutBtn");
        var zoomResetBtn = document.getElementById("zoomResetBtn");
        var zoomInBtn = document.getElementById("zoomInBtn");
        if (!zoomOutBtn || !zoomResetBtn || !zoomInBtn) return;

        var currentZoom = getHangTagsFitZoom();
        applyHangTagsZoom(currentZoom);

        zoomOutBtn.addEventListener("click", function () {
          currentZoom = Math.max(0.1, currentZoom - 0.05);
          applyHangTagsZoom(currentZoom);
        });
        zoomInBtn.addEventListener("click", function () {
          currentZoom = Math.min(1.5, currentZoom + 0.05);
          applyHangTagsZoom(currentZoom);
        });
        zoomResetBtn.addEventListener("click", function () {
          currentZoom = getHangTagsFitZoom();
          applyHangTagsZoom(currentZoom);
        });

        window.addEventListener("resize", function () {
          currentZoom = getHangTagsFitZoom();
          applyHangTagsZoom(currentZoom);
        });
      }

      function hideMSRP() {
        var msrpcheckBox = document.getElementById("msrpCheckBox");
        var elementMSRP = document.getElementById("msrpLine");
        if (msrpcheckBox.checked == true) {
          elementMSRP.classList.remove("hidden");
        } else {
          elementMSRP.classList.add("hidden");
        }
      }
      function hideSavings() {
        var savingscheckBox = document.getElementById("savingsCheckBox");
        var elementSavings = document.getElementById("savingsLine");
        if (savingscheckBox.checked == true) {
          elementSavings.classList.remove("hidden");
        } else {
          elementSavings.classList.add("hidden");
        }
      }
      function hideRebates() {
        var rebatescheckBox = document.getElementById("rebatesCheckBox");
        var elementRebates = document.getElementById("rebatesLine");
        if (rebatescheckBox.checked == true) {
          elementRebates.classList.remove("hidden");
        } else {
          elementRebates.classList.add("hidden");
        }
      }
      function hideDiscounts() {
        var discountscheckBox = document.getElementById("discountsCheckBox");
        var elementDiscounts = document.getElementById("discountsLine");
        if (discountscheckBox.checked == true) {
          elementDiscounts.classList.remove("hidden");
        } else {
          elementDiscounts.classList.add("hidden");
        }
      }
      function hideFees() {
        var feescheckBox = document.getElementById("feesCheckBox");
        var elementFees = document.getElementById("feesLine");
        if (feescheckBox.checked == true) {
          elementFees.classList.remove("hidden");
        } else {
          elementFees.classList.add("hidden");
        }
      }
      function hidePhoto() {
        var photocheckBox = document.getElementById("photoCheckBox");
        var elementPhoto = document.getElementById("photoLine");
        if (photocheckBox.checked == true) {
          elementPhoto.classList.remove("hidden");
        } else {
          elementPhoto.classList.add("hidden");
        }
      }
      function hideDescription() {
        var descriptioncheckBox = document.getElementById("descriptionCheckBox");
        var elementDescription = document.getElementById("descriptionLine");
        if (descriptioncheckBox.checked == true) {
          elementDescription.classList.remove("hidden");
        } else {
          elementDescription.classList.add("hidden");
        }
      }
      function hideQrCode() {
        var qrCodeCheckBox = document.getElementById("qrCodeCheckBox");
        var elementQrCode = document.getElementById("qrcode");
        if (qrCodeCheckBox.checked == true) {
          elementQrCode.classList.remove("hidden");
        } else {
          elementQrCode.classList.add("hidden");
        }
      }
      function hideBarCode() {
        var barCodeCheckBox = document.getElementById("barCodeCheckBox");
        var elementBarCode = document.getElementById("barcode");
        if (barCodeCheckBox.checked == true) {
          elementBarCode.classList.remove("hidden");
        } else {
          elementBarCode.classList.add("hidden");
        }
      }
      function hideFooterLine() {
        var footerCheckBox = document.getElementById("footerCheckBox");
        var elementFooter = document.getElementById("footerLine");
        if (footerCheckBox.checked == true) {
          elementFooter.classList.remove("hidden");
        } else {
          elementFooter.classList.add("hidden");
        }
      }

      document.addEventListener("DOMContentLoaded", initHangTagsZoom);
    </script>
  </body>
</html>
